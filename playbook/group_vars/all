---
astarte_k8s_namespace: "{{ lookup('vars', 'meta.namespace', default='astarte') }}"
astarte_distribution_channel: "{{ lookup('vars', 'distribution_channel', default='astarte') }}" # This defaults to the OSS public release on Docker Hub
astarte_tag: "{{ lookup('vars', 'version', default='0.10.0-beta.3') }}"

# Reasonable defaults for standard K8S deployments
rabbitmq_connection_host: "rabbitmq.{{ astarte_k8s_namespace }}.svc.cluster.local"
rabbitmq_connection_port: "5672"
cassandra_nodes: "cassandra.{{ astarte_k8s_namespace }}.svc.cluster.local:9042"
cfssl_url: "http://cfssl.astarte.svc.cluster.local"
astarte_api_use_ssl: true
astarte_api_expose_housekeeping: true
astarte_api_enable_cors: false
astarte_api_dns:
astarte_dashboard_use_ssl: "{{ deploy_astarte_dashboard }}"
astarte_dashboard_use_dedicated_dns: "{{ deploy_astarte_dashboard }}"
astarte_dashboard_dns:
mqtt_broker_dns:
mqtt_broker_port: 8883

# Reasonable K8S Deployment Policies
k8s_storage_class_name: "{{ lookup('vars', 'storage_class_name', default='') }}"
k8s_use_rbac: "{{ lookup('vars', 'rbac', default=true) }}"

### Ingress deployment control
##### Voyager
deploy_voyager_broker_ingress: true
deploy_voyager_api_ingress: true
voyager_use_letsencrypt: true

### Control 3rd Party components deployment
deploy_vernemq_k8s: true
deploy_rabbitmq_k8s: true
deploy_cassandra_k8s: true
deploy_cfssl_k8s: true

### Control additional Astarte components deployment
deploy_astarte_trigger_engine: true
deploy_astarte_dashboard: true

### Data Updater Plant AMQP policies

### AppEngine API AMQP policies
astarte_appengine_api_rooms_amqp_client_host: "{{ rabbitmq_connection_host }}"
astarte_appengine_api_rooms_amqp_client_username_secret_name: rabbitmq-user-credentials
astarte_appengine_api_rooms_amqp_client_username_secret_key: admin-username
astarte_appengine_api_rooms_amqp_client_password_secret_name: rabbitmq-user-credentials
astarte_appengine_api_rooms_amqp_client_password_secret_key: admin-password

### Astarte Applications Resources and Replicas. You might want to override these.
## Housekeeping
astarte_housekeeping_k8s_resources_requests_cpu: 100m
astarte_housekeeping_k8s_resources_requests_memory: 128M
astarte_housekeeping_k8s_resources_limits_cpu: 200m
astarte_housekeeping_k8s_resources_limits_memory: 256M
astarte_housekeeping_k8s_replicas: 1
astarte_housekeeping_api_k8s_resources_requests_cpu: 100m
astarte_housekeeping_api_k8s_resources_requests_memory: 128M
astarte_housekeeping_api_k8s_resources_limits_cpu: 200m
astarte_housekeeping_api_k8s_resources_limits_memory: 256M
astarte_housekeeping_api_k8s_replicas: 1
## Realm Management
astarte_realm_management_k8s_resources_requests_cpu: 100m
astarte_realm_management_k8s_resources_requests_memory: 128M
astarte_realm_management_k8s_resources_limits_cpu: 200m
astarte_realm_management_k8s_resources_limits_memory: 256M
astarte_realm_management_k8s_replicas: 1
astarte_realm_management_api_k8s_resources_requests_cpu: 100m
astarte_realm_management_api_k8s_resources_requests_memory: 128M
astarte_realm_management_api_k8s_resources_limits_cpu: 200m
astarte_realm_management_api_k8s_resources_limits_memory: 256M
astarte_realm_management_api_k8s_replicas: 1
## Pairing
astarte_pairing_k8s_resources_requests_cpu: 100m
astarte_pairing_k8s_resources_requests_memory: 128M
astarte_pairing_k8s_resources_limits_cpu: 200m
astarte_pairing_k8s_resources_limits_memory: 256M
astarte_pairing_k8s_replicas: 1
astarte_pairing_api_k8s_resources_requests_cpu: 100m
astarte_pairing_api_k8s_resources_requests_memory: 128M
astarte_pairing_api_k8s_resources_limits_cpu: 200m
astarte_pairing_api_k8s_resources_limits_memory: 256M
astarte_pairing_api_k8s_replicas: 1
## Data Updater Plant
astarte_data_updater_plant_k8s_resources_requests_cpu: 400m
astarte_data_updater_plant_k8s_resources_requests_memory: 512M
astarte_data_updater_plant_k8s_resources_limits_cpu: 1000m
astarte_data_updater_plant_k8s_resources_limits_memory: 1024M
astarte_data_updater_plant_k8s_replicas: 1
## AppEngine API
astarte_appengine_api_k8s_resources_requests_cpu: 400m
astarte_appengine_api_k8s_resources_requests_memory: 512M
astarte_appengine_api_k8s_resources_limits_cpu: 1000m
astarte_appengine_api_k8s_resources_limits_memory: 1024M
astarte_appengine_api_k8s_replicas: 1
## Trigger Engine
astarte_trigger_engine_k8s_resources_requests_cpu: 200m
astarte_trigger_engine_k8s_resources_requests_memory: 256M
astarte_trigger_engine_k8s_resources_limits_cpu: 500m
astarte_trigger_engine_k8s_resources_limits_memory: 512M
astarte_trigger_engine_k8s_replicas: 1
